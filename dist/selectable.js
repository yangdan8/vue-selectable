!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("vueSelectable",[],t):"object"==typeof exports?exports.vueSelectable=t():e.vueSelectable=t()}(window,(function(){return function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var s=[],n=!0,i=!1,l=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(s.push(r.value),!t||s.length!==t);n=!0);}catch(e){i=!0,l=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw l}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){if(arguments.length>1)for(var t=1;t<arguments.length;t++)if("object"===c(arguments[t])&&null!==arguments[t])for(var s=Object.keys(arguments[t]),n=0;n<s.length;n++)e[s[n]]=arguments[t][s[n]];return e}s.r(t),s.d(t,"setSelectableItems",(function(){return g})),s.d(t,"setOptions",(function(){return b}));var h=Object.assign||a,u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,e),o(this,"el",null),o(this,"selectBox",null),o(this,"selectBoxSelector",".selection"),o(this,"rootElement",document),o(this,"boundingBox",document),o(this,"boundingBoxSelector",null),o(this,"dragging",!1),o(this,"startX",null),o(this,"startY",null),o(this,"endX",null),o(this,"endY",null),o(this,"selectables",[]),o(this,"selected",[]),o(this,"selectedSetter",null),o(this,"selectedGetter",null),o(this,"selectingSetter",null),o(this,"selecting",[]),o(this,"addMode",!1),o(this,"disableTextSelection",!0),o(this,"handlers",{mousedown:null,mouseup:null,mousemove:null}),o(this,"scrollingFrame",null),o(this,"scrollSpeed",10),o(this,"scrollDistance",10),o(this,"scrollDocumentEnabled",!0),o(this,"scrollRepeater",null),o(this,"renderSelected",!1),o(this,"renderSelecting",!1),o(this,"overrideAddMode",!1),o(this,"selectingClass","selecting"),o(this,"selectedClass","selected"),o(this,"firstRun",!0),this.handlers.mousedown=this.mouseDown.bind(this),this.handlers.mouseup=this.mouseUp.bind(this),this.handlers.mousemove=this.mouseMove.bind(this),h(this,t),this.attach()}var t,s,i;return t=e,i=[{key:"disableTextSelection",value:function(e){return e.preventDefault(),!1}},{key:"absBox",value:function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset,width:t.width,height:t.height}}}],(s=[{key:"attach",value:function(){var e=this;this.rootElement&&Object.keys(this.handlers).forEach((function(t){return e.rootElement.addEventListener(t,e.handlers[t])}))}},{key:"detach",value:function(){var t=this;Object.keys(this.handlers).forEach((function(e){return t.rootElement.removeEventListener(e,t.handlers[e])})),this.disableTextSelection&&this.dragging&&this.rootElement.removeEventListener("selectstart",e.disableTextSelection),this.scrollRepeater&&clearInterval(this.scrollRepeater),this.selectables=[],this.selectBox=null,this.boundingBox=null,this.rootElement=null,this.scrollingFrame=null,this.element=null}},{key:"setSelectables",value:function(e){this.selectables=e,this.selected=e.map((function(e){return!1})),"function"==typeof this.selectedSetter&&this.selectedSetter(this.selected,this.selected)}},{key:"getEventTarget",value:function(e){var t=this.el;if(e&&t){var s=!1;if(t.getRootNode()!==document&&(s=!0),s){var n=e.composedPath();return n&&n.length&&n[0]}return e.target}}},{key:"mouseDown",value:function(t){var s=this.getEventTarget(t),i=this.el===s||this.el.contains(s);if(0===t.button&&i){var l=this.el.getRootNode();this.boundingBoxSelector&&(this.boundingBox=l.querySelector(this.boundingBoxSelector));var r=e.absBox(this.boundingBox);if(!(t.pageX<r.left||t.pageX>r.width+r.left||t.pageY<r.top||t.pageY>r.height+r.top)){this.disableTextSelection&&this.rootElement.addEventListener("selectstart",e.disableTextSelection),this.scrollRepeater&&(clearInterval(this.scrollRepeater),this.scrollRepeater=null);var o=n(this.bound(t),2),c=o[0],a=o[1];if(this.selectBox=l.querySelector(this.selectBoxSelector),this.scrollingFrame&&(a+=this.scrollingFrame.scrollTop),this.startX=c,this.startY=a,this.endX=c,this.endY=a,this.dragging=!0,this.selecting=this.selectables.map((function(e){return!1})),"function"==typeof this.selectingSetter&&this.selectingSetter(this.selecting),this.addMode=this.overrideAddMode||t.ctrlKey||t.metaKey,this.addMode){if("function"==typeof this.selectedGetter){var h=this.selectedGetter()||[];this.selected=this.selectables.map((function(e,t){return!!h[t]}))}}else this.selected=this.selecting,"function"==typeof this.selectedSetter&&this.selectedSetter(this.selected,this.selecting);this.updateSelection(),this.render()}}}},{key:"mouseUp",value:function(t){var s=this;if(this.dragging){if(0!==t.button)return;this.disableTextSelection&&this.rootElement.removeEventListener("selectstart",e.disableTextSelection);var i=n(this.bound(t),2),l=i[0],r=i[1];if(this.endX=l,this.endY=r,this.scrollingFrame&&(this.endY+=this.scrollingFrame.scrollTop),this.scrollRepeater&&(clearInterval(this.scrollRepeater),this.scrollRepeater=null),this.dragging=!1,this.updateSelection(),"function"==typeof this.selectedGetter){var o=this.selectedGetter()||[];this.selected=this.selectables.map((function(e,t){return!!o[t]}))}if(this.addMode){var c=this.selecting.reduce((function(e,t){return e+t?1:0}),0),a=this.selecting.findIndex((function(e){return!!e}));1===c&&this.selected[a]?this.selected[a]=!1:this.selected=this.selected.map((function(e,t){return e||s.selecting[t]}))}else this.selected=this.selecting;"function"==typeof this.selectedSetter&&this.selectedSetter(this.selected,this.selecting),this.selecting=[],this.selectingSetter&&this.selectingSetter(this.selecting),this.render()}}},{key:"mouseMove",value:function(e){if(this.dragging){var t=n(this.bound(e),2),s=t[0],i=t[1];this.endX=s,this.endY=i,this.scrollRepeater&&(clearInterval(this.scrollRepeater),this.scrollRepeater=null),this.scrollingFrame?this.endY+=this.scrollFrame(e):this.scrollDocumentEnabled&&this.scrollDocument(e),this.updateSelection(),this.render()}}},{key:"scrollFrame",value:function(e){var t=this,s=this.scrollingFrame,n=s.getBoundingClientRect(),i=0;return e.pageY>=n.bottom-this.scrollDistance?i=this.scrollSpeed:e.pageY<=n.top+this.scrollDistance&&(i=-this.scrollSpeed),s.scrollTop+=i,(e.pageY>=n.bottom||e.pageY<=n.top)&&(this.scrollRepeater&&clearInterval(this.scrollRepeater),this.scrollRepeater=setInterval((function(){return t.mouseMove(e)}),16)),s.scrollTop}},{key:"scrollDocument",value:function(e){var t=this,s=0;this.endY<=window.pageYOffset?s=-this.scrollSpeed:this.endY>=window.pageYOffset+window.innerHeight&&(s=this.scrollSpeed),0!==s&&(window.scrollBy(0,s),this.scrollRepeater&&clearInterval(this.scrollRepeater),this.scrollRepeater=setInterval((function(){return t.mouseMove(e)}),16))}},{key:"bound",value:function(t){var s=e.absBox(this.boundingBox);return[Math.min(Math.max(s.left,t.pageX),s.width+s.left),Math.min(Math.max(s.top,t.pageY),s.height+s.top)]}},{key:"updateSelection",value:function(){var t=this.getSelectionBox();t.top-=this.scrollingFrame?this.scrollingFrame.scrollTop:0,this.selecting=this.selectables.map(e.absBox).map((function(e){return Math.abs(2*(t.left-e.left)+t.width-e.width)<t.width+e.width&&Math.abs(2*(t.top-e.top)+t.height-e.height)<t.height+e.height})),this.selectingSetter&&this.selectingSetter(this.selecting)}},{key:"getSelectionBox",value:function(){return{left:Math.min(this.startX,this.endX),top:Math.min(this.startY,this.endY),width:Math.abs(this.startX-this.endX),height:Math.abs(this.startY-this.endY)}}},{key:"renderSelection",value:function(){var e=this;(this.renderSelected||this.renderSelecting)&&this.selectables.forEach((function(t,s){e.renderSelecting&&(e.dragging&&e.selecting[s]?t.classList.add(e.selectingClass):t.classList.remove(e.selectingClass)),e.renderSelected&&(e.selected[s]?t.classList.add(e.selectedClass):t.classList.remove(e.selectedClass))}))}},{key:"render",value:function(){var t=this.selectBox.style;if(this.dragging){var s=this.getSelectionBox(),n=e.absBox(this.boundingBox);if(t.display="block",this.firstRun){var i=e.absBox(this.selectBox);this.selectBoxStartX=n.left-i.left,this.selectBoxStartY=n.top-i.top,this.firstRun=!1}t.left=s.left-n.left+this.selectBoxStartX+"px",t.top=s.top-n.top+this.selectBoxStartY-(this.scrollingFrame?this.scrollingFrame.scrollTop:0)+"px",t.width=s.width+"px",t.height=s.height+"px"}else t.display="none";this.renderSelection()}}])&&r(t.prototype,s),i&&r(t,i),e}(),d=Object.assign||a;function f(e,t,s){e.selectable=new u(d({boundingBox:t.constraint?document.querySelector(t.constraint):e,selectBoxSelector:t.box||".selection",boundingBoxSelector:t.constraint,el:e},s)),e.selectable.setSelectables(Array.prototype.slice.call(e.querySelectorAll(t.items||".selectable")))}var p={twoWay:!1,params:["items","box","constraint"],bind:function(e,t){var s;e&&t&&(s=t.value,f(e,e.dataset,s))},update:function(e){this&&this.el&&!this.el.selectable&&f(this.el,this.el.dataset,e)},unbind:function(e){e||(e=this.el),e.selectable.detach(),e.selectable=null}};t.default=p;function g(e,t){if(e&&e.selectable&&"function"==typeof e.selectable.setSelectables){var s=Array.prototype.slice.call(e.querySelectorAll(t||e.dataset.items||".selectable"));return e.selectable.setSelectables(s),s.length}return-1}function b(e,t){if(e&&e.selectable&&"function"==typeof e.selectable.setSelectables){var s=null==e.selectable.rootElement&&null!=t.rootElement;d(e.selectable,t),s&&e.selectable.attach()}}}])}));